(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{39:function(e,t,c){},40:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(1),a=c(19),r=c.n(a),l=c(7),o=c(17),i=c(3),j="GET_USER",d="GET_ALL_USER",b="GET_ALL_POST",u={token:"",user:{}},m=c(15),h=[],O=[],x=Object(o.b)({jwt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(i.a)({},t.payload);default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(m.a)(t.payload);default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(m.a)(t.payload);default:return e}}}),p=Object(o.c)(x,window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__():null),f=c(2),g=c(8),N=c(6),v=function(e){var t=e.children,c=Object(N.a)(e,["children"]);return Object(n.jsx)(g.b,Object(i.a)(Object(i.a)({},c),{},{render:function(e){return"undefined"!==typeof window&&localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt"))?t:Object(n.jsx)(g.a,{to:{pathname:e.location.state?e.location.state.prev:"/",state:{prev:e.location.pathname}}})}}))},y=c(4),w="https://easy-social-vuducvi.herokuapp.com/api",k=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var c=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?c:3&c|8).toString(16)}));return t},S=function(e){var t=(new Date-new Date(e))/864e5;return 24*t<1?Math.floor(24*t*60).toString()+" minutes ago":t<1?Math.floor(24*t).toString()+" hours ago":t<30?Math.floor(t).toString()+" days ago":t>30?Math.floor(t/30).toString()+" months ago":void 0},_=function(){return fetch("".concat(w,"/post/posts"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},F=Object(l.b)((function(e){return{jwt:e.jwt}}),null)((function(e){e.jwt,Object(N.a)(e,["jwt"]);var t=Object(s.useState)(""),c=Object(y.a)(t,2),a=c[0],r=c[1],l=Object(s.useState)([]),o=Object(y.a)(l,2),i=o[0],j=o[1],d=Object(s.useState)([]),b=Object(y.a)(d,2),u=b[0],m=b[1],h=Object(s.useState)(1),O=Object(y.a)(h,2),x=O[0],p=O[1],g=function(e){if(e.preventDefault(),!a.trim())return j([]);(function(e){return fetch("".concat(w,"/post/find"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({find:e})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(a).then((function(e){j(e),console.log(e);for(var t=[],c=Math.ceil(e.length/3),n=1;n<c+1;n++)t.push(n);m(t)})).catch((function(e){return console.log(e)}))},v=function(e){return r(e.target.value)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("div",{className:"mb-4",children:Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("form",{onSubmit:g,children:Object(n.jsxs)("div",{className:"input-group mb-3",children:[Object(n.jsx)("input",{onChange:v,type:"text",className:"form-control",placeholder:"Title post..."}),Object(n.jsx)("div",{className:"input-group-append",children:Object(n.jsx)("button",{className:"btn btn-outline-secondary ml-3",type:"submit",children:"Find Post"})})]})})})})}),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"col-12 d-flex",children:Object(n.jsx)("div",{className:"card-columns",children:0!==i.length&&i.slice(3*(x-1),3*x).map((function(e){return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)(f.b,{to:"/post/".concat(e._id),children:Object(n.jsx)("div",{className:"img-post",style:{backgroundImage:"url(".concat(w,"/post/photo/").concat(e._id,")")}})}),Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h5",{className:"card-title",children:e.title.length>50?e.title.slice(0,100)+" ...more":e.title}),Object(n.jsx)("p",{className:"card-text",children:e.body.length>50?e.body.slice(0,100)+" ...more":e.body}),Object(n.jsxs)("div",{className:"post-footer py-2 d-flex justify-content-between",children:[Object(n.jsxs)("h6",{className:" small m-0 text-muted",children:["Posted by"," ",Object(n.jsx)(f.b,{to:"/profile/".concat(e.postedBy._id),children:e.postedBy.name})]}),Object(n.jsx)("h6",{className:"small m-0 text-muted",children:S(e.createdAt)})]})]})]})},k())}))})})}),0!==i.length&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(n.jsxs)("ul",{className:"pagination ",children:[Object(n.jsx)("li",{onClick:function(e){1!==x&&p(x-1)},style:{padding:".5rem 1rem"},className:"page-item page-link cursor",children:"Previous"}),u.map((function(e){return e===x?Object(n.jsx)("li",{onClick:function(t){p(e)},className:"page-item page-link cursor",style:{backgroundColor:"#3f51b5",color:"#fff",padding:".5rem 1rem"},children:e},k()):Object(n.jsx)("li",{onClick:function(t){p(e)},className:"page-item page-link cursor",style:{padding:".5rem 1rem"},children:e},k())})),Object(n.jsx)("li",{onClick:function(e){x!==u.length&&p(x+1)},style:{padding:".5rem 1rem"},className:"page-item page-link cursor",children:"Next"})]})})})]})}));var C=Object(l.b)((function(e){return{posts:e.posts}}),null)((function(e){var t=e.posts,c=(Object(N.a)(e,["posts"]),Object(s.useState)([])),a=Object(y.a)(c,2),r=a[0],l=a[1],o=Object(s.useState)(1),i=Object(y.a)(o,2),j=i[0],d=i[1];return Object(s.useEffect)((function(){window.scrollTo(0,0);for(var e=Math.ceil(t.length/8),c=[],n=1;n<e+1;n++)c.push(n);l(c)}),[t]),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)(F,{}),Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("h2",{className:"mb-4",children:"New Post"})}),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"col-12 d-flex",children:Object(n.jsx)("div",{className:"card-columns",children:0!==t.length&&t.slice(8*(j-1),8*j).map((function(e){return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"card",children:[Object(n.jsx)(f.b,{to:"/post/".concat(e._id),children:Object(n.jsx)("div",{className:"img-post",style:{backgroundImage:"url(".concat(w,"/post/photo/").concat(e._id,")")}})}),Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("h5",{className:"card-title",children:e.title.length>50?e.title.slice(0,100)+" ...more":e.title}),Object(n.jsx)("p",{className:"card-text",children:e.body.length>50?e.body.slice(0,100)+" ...more":e.body}),Object(n.jsxs)("div",{className:"post-footer py-2 d-flex justify-content-between",children:[Object(n.jsxs)("h6",{className:" small m-0 text-muted",children:["Posted by"," ",Object(n.jsx)(f.b,{to:"/profile/".concat(e.postedBy._id),children:e.postedBy.name})]}),Object(n.jsx)("h6",{className:"small m-0 text-muted",children:S(e.createdAt)})]})]})]})},k())}))})})})]}),Object(n.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(n.jsxs)("ul",{className:"pagination ",children:[Object(n.jsx)("li",{onClick:function(e){1!==j&&d(j-1)},style:{padding:".5rem 1rem"},className:"page-item page-link cursor",children:"Previous"}),r.map((function(e){return e===j?Object(n.jsx)("li",{onClick:function(t){d(e)},className:"page-item page-link cursor",style:{backgroundColor:"#3f51b5",color:"#fff",padding:".5rem 1rem"},children:e},k()):Object(n.jsx)("li",{onClick:function(t){d(e)},className:"page-item page-link cursor",style:{padding:".5rem 1rem"},children:e},k())})),Object(n.jsx)("li",{onClick:function(e){j!==r.length&&d(j+1)},style:{padding:".5rem 1rem"},className:"page-item page-link cursor",children:"Next"})]})}),Object(n.jsx)("div",{className:"col-12",style:{marginBottom:"4rem"}})]})})})),E=function(e){return fetch("".concat(w,"/user/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},I=Object(l.b)((function(e){return{jwt:e.jwt}}),null)(Object(g.g)((function(e){var t=e.jwt,c=e.dispatch,a=Object(N.a)(e,["jwt","dispatch"]),r=Object(s.useState)(!1),l=Object(y.a)(r,2),o=l[0],i=l[1];return Object(s.useEffect)((function(){fetch("".concat(w,"/user/users"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){c({type:d,payload:e})})).catch((function(e){return console.log(e)})),_().then((function(e){c({type:b,payload:e})})).catch((function(e){return console.log(e)})),localStorage.getItem("jwt")&&c({type:j,payload:JSON.parse(localStorage.getItem("jwt"))})}),[a.match]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("nav",{className:"nav nav-tabs bg-primary justify-content-start mb-5 pos-stick nav-pc",children:[Object(n.jsx)(f.c,{exact:!0,className:"nav-link p-3",to:"/",children:"Home"}),Object(n.jsx)(f.c,{className:"nav-link p-3",to:"/users",children:"users"}),t.user._id?"":Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.c,{className:"nav-link p-3",to:"/signup",children:"Sign up"}),Object(n.jsx)(f.c,{className:"nav-link p-3",to:"/signin",children:"Sign in"})]}),t.user._id&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.c,{to:"/post/create",className:"nav-link p-3",children:"Create Post"}),Object(n.jsx)(f.c,{to:"/profile/".concat(t.user._id),className:"nav-link p-3",children:"Profile"}),Object(n.jsx)(f.b,{to:"/",onClick:function(){localStorage.removeItem("jwt"),c({type:j,payload:{jwt:"",user:{}}})},className:"nav-link p-3 cursor",children:"Sign out"})]})]}),Object(n.jsxs)("nav",{className:"nav nav-tabs bg-primary justify-content-start flex-column mb-5 pos-stick nav-mobile",children:[Object(n.jsx)("li",{className:"fa fa-bars nav-link cursor ml-auto p-2",onClick:function(){return i(!o)}}),o&&Object(n.jsxs)("nav",{className:"nav d-inline nav-tabs bg-primary",children:[Object(n.jsx)(f.c,{exact:!0,className:"nav-link p-3",to:"/",children:"Home"}),Object(n.jsx)(f.c,{className:"nav-link p-3",to:"/users",children:"users"}),t.user._id?"":Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.c,{className:"nav-link p-3",to:"/signup",children:"Sign up"}),Object(n.jsx)(f.c,{className:"nav-link p-3",to:"/signin",children:"Sign in"})]}),t.user._id&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.c,{to:"/post/create",className:"nav-link p-3",children:"Create Post"}),Object(n.jsx)(f.c,{to:"/profile/".concat(t.user._id),className:"nav-link p-3",children:"Profile"}),Object(n.jsx)(f.b,{to:"/",onClick:function(){localStorage.removeItem("jwt"),c({type:j,payload:{jwt:"",user:{}}})},className:"nav-link p-3 cursor",children:"Sign out"})]})]})]})]})}))),P=Object(l.b)((function(e){return{posts:e.posts,jwt:e.jwt}}),null)((function(e){var t=e.posts,c=e.match,a=Object(N.a)(e,["posts","match"]),r=Object(s.useState)({}),l=Object(y.a)(r,2),o=l[0],i=l[1],j=Object(s.useState)(!1),d=Object(y.a)(j,2),u=d[0],m=d[1],h=Object(s.useState)(!1),O=Object(y.a)(h,2),x=O[0],p=O[1],g=Object(s.useState)(""),v=Object(y.a)(g,2),F=v[0],C=v[1],E=Object(s.useState)(!1),I=Object(y.a)(E,2),P=I[0],T=I[1],B=Object(s.useState)(""),D=Object(y.a)(B,2),A=D[0],L=D[1];Object(s.useEffect)((function(){window.scrollTo(0,0);var e=c.params.postId;if(0!==t.length){var n=t.find((function(t){return t._id===e}));console.log(n),i(n)}}),[c.params,t]);var J=function(e){(function(e,t,c,n){return fetch("".concat(w,"/post/uncomment"),{method:"PUT",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({text:c,userId:e,postId:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(a.jwt.user._id,o._id,e,a.jwt.token).then((function(e){return e.error?L(e.error):i(e)})).catch((function(e){return console.log(e)}))},U=function(e){if(e.preventDefault(),a.jwt&&!a.jwt.user._id)return p(!0);(function(e,t,c,n){return fetch("".concat(w,"/post/comment"),{method:"PUT",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({text:c,userId:e,postId:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(a.jwt.user._id,o._id,F,a.jwt.token).then((function(e){return e.error?L(e.error):(C(""),i(e))}))};return Object(n.jsxs)("div",{className:"container",children:[P&&Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"contain-full-img",children:[Object(n.jsxs)("div",{className:"full-img",style:{position:"relative"},children:[Object(n.jsx)("img",{src:"".concat(w,"/post/photo/").concat(o._id),alt:o.name}),Object(n.jsx)("i",{className:"fa fa-close close-img cursor",onClick:function(){return T(!1)}})]}),Object(n.jsx)("div",{className:"overlay",onClick:function(){return T(!1)}})]})}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("h3",{className:"display-3",style:{wordBreak:"break-word",lineHeight:.8,marginBottom:"1rem"},children:o._id?o.title:"Loading..."})}),Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("div",{className:"container-title cursor",children:o._id?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("img",{src:"".concat(w,"/post/photo/").concat(o._id),alt:o.name,onClick:function(){return T(!0)}})}):Object(n.jsx)("div",{className:"d-flex align-items-center loading h-100",children:Object(n.jsx)("h4",{className:"text-center w-100",children:"Loading..."})})})}),Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsxs)("div",{className:"like-post my-3",children:[Object(n.jsxs)("span",{className:"like",children:[o._id&&o.likes.length," ",Object(n.jsx)("i",{onClick:function(){if(a.jwt&&!a.jwt.user._id)return m(!0);var e,t,c;o.likes.find((function(e){return e===a.jwt.user._id}))?function(e,t,c){return fetch("".concat(w,"/post/unlike"),{method:"PUT",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({userId:e,postId:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(a.jwt.user._id,o._id,a.jwt.token).then((function(e){return e.error?L(e.error):i(e)})).catch((function(e){return console.log(e)})):(e=a.jwt.user._id,t=o._id,c=a.jwt.token,fetch("".concat(w,"/post/like"),{method:"PUT",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({userId:e,postId:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){return e.error?L(e.error):i(e)})).catch((function(e){return console.log(e)}))},className:"fa fa-thumbs-up cursor border-circle text-success bg-dark p-2"})]}),u&&Object(n.jsxs)("div",{className:"alert alert-warning p-2 mt-2",children:["You haven't",Object(n.jsx)(f.b,{to:"/signin",children:" signin"})]})]}),A&&Object(n.jsxs)("div",{className:"alert alert-danger my-3 mb-0",children:[A,", try ",Object(n.jsx)(f.b,{to:"/signin",children:"signin"})," again"]})]}),Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("div",{className:"container-body bg-white p-3 ",children:o._id?o.body:"Loading..."})}),Object(n.jsx)("div",{className:"col-12",children:o._id&&Object(n.jsxs)("div",{className:"container-postedBy mt-4",children:["Posted by"," ",Object(n.jsx)(f.b,{to:"/profile/".concat(o.postedBy._id),children:o.postedBy.name})," ","on ",S(o.createdAt)]})}),Object(n.jsx)("div",{className:"col-12",children:Object(n.jsxs)("div",{className:"mt-3 d-flex button-container-post justify-content-between",children:[Object(n.jsx)(f.b,{to:"/",className:"btn btn-raised btn-primary",children:"Back to posts"}),o._id&&a.jwt&&a.jwt.user._id===o.postedBy._id&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.b,{className:"btn btn-raised btn-warning",to:"/post/update/".concat(o._id),children:"Update post"}),Object(n.jsx)("button",{className:"btn btn-raised btn-danger",onClick:function(){var e,t;window.confirm("Delete this post?")&&(e=o._id,t=a.jwt.token,fetch("".concat(w,"/post/delete/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?L(e.error):(_().then((function(e){a.dispatch({type:b,payload:e})})).catch((function(e){return console.log(e)})),a.history.push("/"))}))},children:"Delete post"})," "]})]})}),Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("h3",{className:"leave-comment",children:"Leave a comment"}),x&&Object(n.jsxs)("div",{className:"alert alert-warning p-2 m-0",children:["You haven't",Object(n.jsx)(f.b,{to:"/signin",children:" signin"})]})]}),Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("div",{className:"comment-post",children:Object(n.jsxs)("form",{onSubmit:U,children:[Object(n.jsx)("div",{className:"form-group mt-3",children:Object(n.jsx)("textarea",{type:"text",onChange:function(e){return C(e.target.value)},value:F,className:"form-control",placeholder:"Type here"})}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary btn-raised",children:"Submit"})]})})}),Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("ul",{className:"list-group bmd-list-group-sm",children:o.comments&&o.comments.slice(0,100).map((function(e){return Object(n.jsx)("div",{className:"list-group-item comment",children:Object(n.jsxs)("div",{className:"bmd-list-group-col",children:[Object(n.jsx)("p",{className:"list-group-item-heading",children:e.text}),Object(n.jsxs)("div",{className:"list-group-item-text",children:["Posted by"," ",Object(n.jsx)(f.b,{to:"/profile/".concat(e.user._id),children:e.user.name})," ",S(e.createdAt),a.jwt.user&&a.jwt.user._id===e.user._id&&Object(n.jsx)("span",{className:"ml-3 cursor text-danger",onClick:function(){return J(e.text)},children:"delete"})]})]})},k())}))})}),Object(n.jsx)("div",{className:"col-12",style:{marginBottom:"5rem"},children:o.comments&&o.comments.length>100&&Object(n.jsx)("div",{className:"alert alert-danger",children:"Reach maximum 100 comments"})})]})]})})),T=Object(l.b)((function(e){return{users:e.users,jwt:e.jwt}}),null)((function(e){e.jwt,e.users,Object(N.a)(e,["jwt","users"]);var t=Object(s.useState)(""),c=Object(y.a)(t,2),a=c[0],r=c[1],l=Object(s.useState)([]),o=Object(y.a)(l,2),i=o[0],j=o[1],d=Object(s.useState)([]),b=Object(y.a)(d,2),u=b[0],m=b[1],h=Object(s.useState)(1),O=Object(y.a)(h,2),x=O[0],p=O[1],g=function(e){var t="left"===e?i.slice(10*(x-1),10*(x-1)+5):i.slice(10*(x-1)+5,10*(x-1)+10);return Object(n.jsx)(n.Fragment,{children:t.map((function(e){return Object(n.jsxs)("div",{className:"list-group-item list-group-item-action flex-row d-flex align-items-start",style:{flexFlow:"nowrap"},children:[Object(n.jsx)("div",{style:{flexBasis:"20%",flexShrink:0},children:Object(n.jsx)(f.b,{to:"/profile/".concat(e._id),className:"w-100",children:Object(n.jsx)("div",{className:"avatar-users",style:{backgroundImage:"url(".concat(w,"/user/photo/").concat(e._id,")"),backgroundPosition:"center",backgroundSize:"cover",width:"100%",paddingTop:"100%"}})})}),Object(n.jsxs)("div",{style:{flexGrow:"1"},children:[Object(n.jsxs)("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[Object(n.jsx)("h5",{className:"mb-1 font-weight-bold text-primary",children:Object(n.jsxs)(f.b,{to:"/profile/".concat(e._id),children:[" ",e.name]})}),Object(n.jsx)("small",{className:"about-user",children:Object(n.jsxs)("p",{className:"small m-0",children:["join\xa0",S(e.createdAt)]})})]}),Object(n.jsx)("p",{children:e.about?e.about.length>200?e.about.slice(0,200)+"...":e.about:Object(n.jsx)("small",{className:"font-italic font-weight-light",children:"Not found user's about"})})]})]},e._id)}))})},v=function(e){if(e.preventDefault(),!a.trim())return j([]);(function(e){return fetch("".concat(w,"/user/find"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({find:e})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(a).then((function(e){j(e),console.log(e);for(var t=[],c=Math.ceil(e.length/10),n=1;n<c+1;n++)t.push(n);m(t)})).catch((function(e){return console.log(e)}))},_=function(e){return r(e.target.value)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("div",{className:"mb-4",children:Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("form",{onSubmit:v,children:Object(n.jsxs)("div",{className:"input-group mb-3",children:[Object(n.jsx)("input",{onChange:_,type:"text",className:"form-control",placeholder:"Name or email ..."}),Object(n.jsx)("div",{className:"input-group-append",children:Object(n.jsx)("button",{className:"btn btn-outline-secondary ml-3",type:"submit",children:"Find user"})})]})})})})}),0!==i.length&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"col-12 col-md-6 pr-5-md",children:Object(n.jsx)("div",{className:"list-group",children:g("left")})}),Object(n.jsx)("div",{className:"col-12 col-md-6 pl-5-md",children:Object(n.jsx)("div",{className:"list-group",children:g("right")})}),Object(n.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(n.jsxs)("ul",{className:"pagination ",children:[Object(n.jsx)("li",{onClick:function(e){1!==x&&p(x-1)},style:{padding:".5rem 1rem"},className:"page-item page-link cursor",children:"Previous"}),u.map((function(e){return e===x?Object(n.jsx)("li",{onClick:function(t){p(e)},className:"page-item page-link cursor",style:{backgroundColor:"#3f51b5",color:"#fff",padding:".5rem 1rem"},children:e},k()):Object(n.jsx)("li",{onClick:function(t){p(e)},className:"page-item page-link cursor",style:{padding:".5rem 1rem"},children:e},k())})),Object(n.jsx)("li",{onClick:function(e){x!==u.length&&p(x+1)},style:{padding:".5rem 1rem"},className:"page-item page-link cursor",children:"Next"})]})})]})]})})),B=Object(l.b)((function(e){return{allusers:e.users}}),null)((function(e){e.jwt;var t=e.allusers,c=(Object(N.a)(e,["jwt","allusers"]),Object(s.useState)([])),a=Object(y.a)(c,2),r=a[0],l=a[1],o=Object(s.useState)(1),i=Object(y.a)(o,2),j=i[0],d=i[1];Object(s.useEffect)((function(){window.scrollTo(0,0);var e=0,c=[];t&&(e=Math.ceil(t.length/10));for(var n=1;n<e+1;n++)c.push(n);l(c),console.log(t.length)}),[t]);var b=function(e){var c="left"===e?t.slice(10*(j-1),10*(j-1)+5):t.slice(10*(j-1)+5,10*(j-1)+10);return Object(n.jsx)(n.Fragment,{children:t?c.map((function(e){return Object(n.jsxs)("div",{className:"list-group-item list-group-item-action flex-row d-flex align-items-start",style:{flexFlow:"nowrap"},children:[Object(n.jsx)("div",{style:{flexBasis:"20%",flexShrink:0},children:Object(n.jsx)(f.b,{to:"/profile/".concat(e._id),className:"w-100",children:Object(n.jsx)("div",{className:"avatar-users",style:{backgroundImage:"url(".concat(w,"/user/photo/").concat(e._id,")"),backgroundPosition:"center",backgroundSize:"cover",width:"100%",paddingTop:"100%"}})})}),Object(n.jsxs)("div",{style:{flexGrow:"1"},children:[Object(n.jsxs)("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[Object(n.jsx)("h5",{className:"mb-1 font-weight-bold text-primary",children:Object(n.jsxs)(f.b,{to:"/profile/".concat(e._id),children:[" ",e.name]})}),Object(n.jsx)("small",{className:"about-user",children:Object(n.jsxs)("p",{className:"small m-0",children:["joined\xa0",S(e.createdAt)]})})]}),Object(n.jsx)("p",{children:e.about?e.about.length>200?e.about.slice(0,200)+"...":e.about:Object(n.jsx)("small",{className:"font-italic font-weight-light",children:"Not found user's about"})})]})]},e._id)})):""})};return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)(T,{}),Object(n.jsx)("div",{className:"col-12 mb-3",children:Object(n.jsx)("h2",{children:"All Users"})}),Object(n.jsx)("div",{className:"col-12 col-md-6 pr-5-md",children:Object(n.jsx)("div",{className:"list-group",children:b("left")})}),Object(n.jsx)("div",{className:"col-12 col-md-6 pl-5-md",children:Object(n.jsx)("div",{className:"list-group",children:b("right")})}),Object(n.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(n.jsxs)("ul",{className:"pagination ",children:[Object(n.jsx)("li",{onClick:function(e){1!==j&&d(j-1)},style:{padding:".5rem 1rem"},className:"page-item page-link cursor",children:"Previous"}),r.map((function(e){return e===j?Object(n.jsx)("li",{onClick:function(t){d(e)},className:"page-item page-link cursor",style:{backgroundColor:"#3f51b5",color:"#fff",padding:".5rem 1rem"},children:e},k()):Object(n.jsx)("li",{onClick:function(t){d(e)},className:"page-item page-link cursor",style:{padding:".5rem 1rem"},children:e},k())})),Object(n.jsx)("li",{onClick:function(e){j!==r.length&&d(j+1)},style:{padding:".5rem 1rem"},className:"page-item page-link cursor",children:"Next"})]})}),Object(n.jsx)("div",{className:"col-12",style:{marginBottom:"4rem"}})]})})})),D=c(12),A=Object(l.b)((function(e){return{jwt:e.jwt}}),null)((function(e){var t=e.jwt,c=(Object(N.a)(e,["jwt"]),{title:"",body:"",photo:"",error:"",success:!1,formData:"",loading:!1}),a=Object(s.useState)(c),r=Object(y.a)(a,2),l=r[0],o=r[1],j=Object(s.useState)(null),d=Object(y.a)(j,2),b=d[0],u=d[1],m=l.title,h=l.body,O=l.success,x=l.error,p=l.loading;Object(s.useEffect)((function(){window.scrollTo(0,0),u(new FormData)}),[]);var g=function(e){var t=e.target.name,c="photo"===t?e.target.files[0]:e.target.value;b.set(t,c),o(Object(i.a)(Object(i.a)({},l),{},Object(D.a)({},t,c)))},v=function(e){e.preventDefault(),b.set("postedBy",t.user._id),o(Object(i.a)(Object(i.a)({},l),{},{loading:!0})),function(e,t){return fetch("".concat(w,"/post/create"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(b,t.token).then((function(e){return console.log(e),e.error?o(Object(i.a)(Object(i.a)({},l),{},{loading:!1,error:e.error})):o(Object(i.a)(Object(i.a)({},c),{},{success:!0}))})).catch((function(e){return console.log(e)}))};return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("h2",{className:"mb-5",children:"New Post"})}),Object(n.jsxs)("div",{className:"col-12",children:[function(){if(x)return"jwt expired"===x?Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"alert alert-danger",children:[x,", try ",Object(n.jsx)(f.b,{to:"/signin",children:"signin"})," again"]})}):Object(n.jsx)("div",{className:"alert alert-danger",children:x})}(),Object(n.jsxs)(n.Fragment,{children:[O&&Object(n.jsx)("div",{className:"alert alert-success",children:"Post created"})," "]}),Object(n.jsxs)(n.Fragment,{children:[p?Object(n.jsx)("h2",{className:"lead bg-light p-5",children:"Loading..."}):""," "]}),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("form",{onSubmit:v,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Photo"}),Object(n.jsx)("input",{type:"file",name:"photo",className:"form-control-file",onChange:g})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Title"}),Object(n.jsx)("input",{type:"text",name:"title",className:"form-control",onChange:g,value:m})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Body"}),Object(n.jsx)("textarea",{rows:"8",name:"body",className:"form-control",onChange:g,value:h})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-raised btn-primary",children:"Submit"})]})})]})]})})})),L=Object(l.b)((function(e){return{jwt:e.jwt}}),null)((function(e){var t=e.jwt,c=Object(N.a)(e,["jwt"]),a={name:"",email:"",password:"",error:"",photo:"",about:"",success:!1},r=Object(s.useState)(new FormData),l=Object(y.a)(r,2),o=l[0],d=(l[1],Object(s.useState)(a)),b=Object(y.a)(d,2),u=b[0],m=b[1],h=u.email,O=u.password,x=u.error,p=u.success,v=u.name,k=u.about,S=t.user,_=t.token;Object(s.useEffect)((function(){window.scrollTo(0,0),m(Object(i.a)(Object(i.a)({},u),{},{name:t.user.name,about:t.user.about})),o.set("name",t.user.name),o.set("about",t.user.about)}),[t]);var F=function(e){var t=e.target.name,c="photo"===t?e.target.files[0]:e.target.value;o.set(t,c),m(Object(i.a)(Object(i.a)({},c),{},Object(D.a)({},t,c)))},C=function(e){console.log(c.location),e.preventDefault(),function(e,t,c){return fetch("".concat(w,"/user/update/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(t)},body:c}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(S._id,_,o).then((function(e){e.error?m(Object(i.a)(Object(i.a)({},u),{},{error:e.error})):(localStorage.setItem("jwt",JSON.stringify(e)),c.dispatch({type:j,payload:e}),m(Object(i.a)(Object(i.a)({},a),{},{success:!0})))})).catch((function(e){return console.log(e)}))};return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("h3",{className:"mb-5",children:"Edit Profile"}),function(){if(x)return"jwt expired"===x?Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"alert alert-danger",children:[x,",try ",Object(n.jsx)(f.b,{to:"/signin",children:"signin"})," again"]})}):Object(n.jsxs)(n.Fragment,{children:[" ",x?Object(n.jsx)("div",{className:"alert alert-danger",children:x}):""," "]})}(),Object(n.jsx)(n.Fragment,{children:p?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(g.a,{to:"/profile/".concat(S._id)})}):""}),Object(n.jsxs)("form",{onSubmit:C,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Avatar"}),Object(n.jsx)("input",{type:"file",name:"photo",onChange:F,className:"form-control-file"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Name"}),Object(n.jsx)("input",{type:"name",name:"name",className:"form-control",value:v,onChange:F})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Email"}),Object(n.jsx)("input",{type:"email",name:"email",className:"form-control",value:h,onChange:F})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Password"}),Object(n.jsx)("input",{type:"password",name:"password",className:"form-control",value:O,onChange:F})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"About yourself"}),Object(n.jsx)("textarea",{rows:"7",name:"about",className:"form-control",value:k,onChange:F})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-raised btn-primary",children:"Submit"})]})]})})})})),J=Object(l.b)((function(e){return{jwt:e.jwt}}),null)((function(e){var t=e.match,c=e.jwt,a=Object(N.a)(e,["match","jwt"]),r=Object(s.useState)({}),l=Object(y.a)(r,2),o=l[0],i=l[1],d=Object(s.useState)(!1),b=Object(y.a)(d,2),u=b[0],m=b[1],h=Object(s.useState)(void 0),O=Object(y.a)(h,2),x=O[0],p=O[1],g=Object(s.useState)(!1),v=Object(y.a)(g,2),_=v[0],F=v[1],C=Object(s.useState)(""),I=Object(y.a)(C,2),P=I[0],T=I[1],B=Object(s.useState)([]),D=Object(y.a)(B,2),A=D[0],L=D[1];Object(s.useEffect)((function(){return window.scrollTo(0,0)}),[]),Object(s.useEffect)((function(){var e;window.scrollTo(0,0),E(t.params.userId).then((function(e){if(e.error)return T(e.error);e._id==c.user._id?(m(!0),i(c.user),p(!!c.user.following.find((function(e){return e._id===c.user._id})))):(m(!1),i(e),c.user.following?p(!!c.user.following.find((function(t){return t._id===e._id}))):p(!1))})).catch((function(e){return console.log(e)})),(e=t.params.userId,fetch("".concat(w,"/post/by/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error||L(e)})).catch((function(e){return console.log(e)}))}),[t,c]);var J=function(){var e,t;window.confirm("Do you want to delete account?")&&(e=o._id,t=c.token,fetch("".concat(w,"/user/delete/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){if(e.error)return T(e.error);a.dispatch({type:j,payload:{token:"",user:{}}}),localStorage.removeItem("jwt"),a.history.push("/")})).catch((function(e){return console.log(e)}))},U=function(){var e,t,n;F(!0),(e=c.user._id,t=o._id,n=c.token,fetch("".concat(w,"/user/follow"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-type":"application/json"},body:JSON.stringify({userId:e,followId:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){if(e.error)return T(e.error);E(c.user._id).then((function(e){localStorage.setItem("jwt",JSON.stringify({token:c.token,user:e})),a.dispatch({type:j,payload:{token:c.token,user:e}}),F(!1)}))}))},z=function(){var e,t,n;F(!0),(e=c.user._id,t=o._id,n=c.token,fetch("".concat(w,"/user/unfollow"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n),"Content-type":"application/json"},body:JSON.stringify({userId:e,unfollowId:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){if(e.error)return T(e.error);E(c.user._id).then((function(e){e.err||(localStorage.setItem("jwt",JSON.stringify({token:c.token,user:e})),a.dispatch({type:j,payload:{token:c.token,user:e}}),F(!1))}))}))};return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-12 mb-3",children:Object(n.jsx)("h2",{children:"Profile"})}),P?"jwt expired"===P?Object(n.jsx)("div",{className:"col-12",children:Object(n.jsxs)("div",{className:"alert alert-danger",children:[P,", try ",Object(n.jsx)(f.b,{to:"/login",children:"login"})," again"]})}):Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("div",{className:"alert alert-danger",children:P})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"col-md-4 col-12",children:Object(n.jsx)("div",{className:"avatar-profile",children:o._id?Object(n.jsx)("img",{className:"img-thumbnail",src:"".concat(w,"/user/photo/").concat(o._id),alt:""}):"Loading..."})}),Object(n.jsxs)("div",{className:"col-md-8 col-12",children:[Object(n.jsxs)("div",{className:"profile-info",children:["Name:"," ",o.name?Object(n.jsx)("span",{className:"name-profile",children:o.name}):"Loading..."]}),Object(n.jsxs)("div",{className:"profile-info",children:["Email:"," ",o.email?Object(n.jsx)("span",{className:"email-profile",children:o.email}):"Loading..."]}),Object(n.jsxs)("div",{className:"profile-info",children:["Joined at:"," ",Object(n.jsx)("span",{className:"joined-profile",children:new Date(o.createdAt).toLocaleString()})]}),Object(n.jsxs)("div",{className:"profile-info",children:["About:"," ",o.about?Object(n.jsx)("div",{className:"span about-profile card-text",children:o.about}):Object(n.jsx)("span",{className:"not-found  ",children:"Not found user's about"})]}),u?Object(n.jsxs)("div",{className:"d-flex justify-content-between button-container",children:[Object(n.jsx)(f.b,{className:"btn btn-raised btn-info",to:"/post/create",children:"Create Post"}),o._id&&Object(n.jsx)(f.b,{className:"btn btn-raised btn-success",to:"/edit/".concat(o._id),children:"Edit Profile"}),Object(n.jsx)("button",{className:"btn btn-raised btn-danger",onClick:J,children:"Delete Profile"})]}):c.user._id&&Object(n.jsx)("div",{className:"d-flex",children:void 0!==x?x?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("button",{className:"btn btn-raised btn-danger",onClick:z,children:_?"...":"UnFollow"})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("button",{className:"btn btn-raised btn-primary",onClick:U,children:_?"...":"Follow"})}):"waiting..."})]}),Object(n.jsxs)("div",{className:"col-12 mt-5",children:[Object(n.jsx)("hr",{className:"m-0"}),Object(n.jsxs)("ul",{className:"row nav nav-tabs nav-justified",children:[Object(n.jsx)("div",{className:"col-12 col-md-4 ",children:Object(n.jsxs)("li",{className:"nav-item ",children:[Object(n.jsxs)("a",{className:"nav-link cursor info-title-user",children:["Post \xa0",Object(n.jsxs)("span",{className:"text-dark",children:["(",A&&A.length,")"]})]}),Object(n.jsxs)("ul",{className:"list-group box-navigator",children:[A.length>0&&A.slice(0,50).map((function(e){return Object(n.jsxs)("li",{className:" d-flex ",children:[Object(n.jsx)("div",{className:"contain-litle-avatar contain-litle-post",children:Object(n.jsx)(f.b,{to:"/post/".concat(e._id),className:"content-litle-avatar container-little-post",style:{backgroundImage:"url(".concat(w,"/post/photo/").concat(e._id,")")}})}),Object(n.jsxs)("span",{className:"name-after-avatar name-after-post",children:[Object(n.jsx)(f.b,{to:"/post/".concat(e._id),children:e.title}),Object(n.jsxs)("div",{className:"created-post text-muted",children:["Created ",S(e.createdAt)]})]})]},k())})),A&&A.length>50&&Object(n.jsx)("div",{className:"alert alert-warning",children:"Reach maximum 50 posts"})]})]})}),Object(n.jsx)("div",{className:"col-12 col-md-4 ",children:Object(n.jsxs)("li",{className:"nav-item ",children:[Object(n.jsxs)("a",{className:"nav-link cursor info-title-user ",children:["Following \xa0",Object(n.jsxs)("span",{className:"text-dark",children:["(",o.following&&o.following.length,")"]})]}),Object(n.jsxs)("ul",{className:"list-group box-navigator",children:[o.following&&o.following.slice(0,50).map((function(e){return Object(n.jsxs)("li",{className:" d-flex align-items-center",children:[Object(n.jsx)("div",{className:"contain-litle-avatar",children:Object(n.jsx)(f.b,{to:"/profile/".concat(e._id),className:"content-litle-avatar",style:{backgroundImage:"url(".concat(w,"/user/photo/").concat(e._id,")")}})}),Object(n.jsx)("span",{className:"name-after-avatar",children:Object(n.jsx)(f.b,{to:"/profile/".concat(e._id),children:e.name})})]},k())})),o.following&&o.following.length>50&&Object(n.jsx)("div",{className:"alert alert-warning",children:"Reach maximum 50 following"})]})]})}),Object(n.jsx)("div",{className:"col-12 col-md-4 ",children:Object(n.jsxs)("li",{className:"nav-item ",children:[Object(n.jsxs)("a",{className:"nav-link cursor info-title-user ",children:["Followers \xa0",Object(n.jsxs)("span",{className:"text-dark",children:["(",o.followers&&o.followers.length,")"]})]}),Object(n.jsxs)("ul",{className:"list-group box-navigator",children:[o.followers&&o.followers.slice(0,50).map((function(e){return Object(n.jsxs)("li",{className:" d-flex align-items-center",children:[Object(n.jsx)("div",{className:"contain-litle-avatar",children:Object(n.jsx)(f.b,{to:"/profile/".concat(e._id),className:"content-litle-avatar",style:{backgroundImage:"url(".concat(w,"/user/photo/").concat(e._id,")")}})}),Object(n.jsx)("span",{className:"name-after-avatar",children:Object(n.jsx)(f.b,{to:"/profile/".concat(e._id),children:e.name})})]},k())})),o.followers&&o.followers.length>50&&Object(n.jsx)("div",{className:"alert alert-warning",children:"Reach maximum 50 followers"})]})]})})]})]})]}),Object(n.jsx)("div",{className:"col-12",style:{marginBottom:"4rem"}})]})})})),U=Object(l.b)((function(e){return{jwt:e.jwt}}),null)((function(e){var t=e.location,c=Object(N.a)(e,["location"]),a={email:"",password:"",error:"",success:!1,loading:!1},r=Object(s.useState)(a),l=Object(y.a)(r,2),o=l[0],d=l[1],b=o.email,u=o.password,m=o.loading,h=o.error,O=o.success,x=function(e){d(Object(i.a)(Object(i.a)({},o),{},Object(D.a)({},e.target.name,e.target.value)))},p=function(e){e.preventDefault(),d(Object(i.a)(Object(i.a)({},o),{},{loading:!0})),function(e,t){return fetch("".concat(w,"/user/signin"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(b,u).then((function(e){e.error?d(Object(i.a)(Object(i.a)({},o),{},{loading:!1,error:e.error})):(d(Object(i.a)(Object(i.a)({},a),{},{success:!0})),c.dispatch({type:j,payload:e}),localStorage.setItem("jwt",JSON.stringify(e)))})).catch((function(e){return console.log(e)}))};return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("h3",{className:"mb-5",children:"Sign In"}),Object(n.jsxs)(n.Fragment,{children:[m?Object(n.jsx)("h2",{className:"lead bg-light p-5",children:"Loading..."}):""," "]}),Object(n.jsxs)(n.Fragment,{children:[" ",h?Object(n.jsx)("div",{className:"alert alert-danger",children:h}):""," "]}),Object(n.jsx)(n.Fragment,{children:O?Object(n.jsx)(g.a,{to:t.state?t.state.prev:"/"}):""}),Object(n.jsxs)("form",{onSubmit:p,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Email"}),Object(n.jsx)("input",{type:"email",name:"email",className:"form-control",value:b,onChange:x})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Password"}),Object(n.jsx)("input",{type:"password",name:"password",className:"form-control",value:u,onChange:x})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-raised btn-primary",children:"Submit"})]})]})})})})),z=(c(39),Object(l.b)((function(e){return{users:e.users}}),null)((function(e){var t=e.users,c=Object(N.a)(e,["users"]),a={name:"",email:"",password:"",error:"",photo:"",about:"",success:!1,loading:!1},r=Object(s.useState)(a),l=Object(y.a)(r,2),o=l[0],j=l[1],b=o.email,u=o.password,h=o.loading,O=o.error,x=o.success,p=o.name,g=o.about,v=Object(s.useState)(null),k=Object(y.a)(v,2),S=k[0],_=k[1];Object(s.useEffect)((function(){return _(new FormData)}),[]);var F=function(e){var t=e.target.name,c="photo"===t?e.target.files[0]:e.target.value;S.set(t,c),j(Object(i.a)(Object(i.a)({},o),{},Object(D.a)({},t,c))),console.log(o)},C=function(e){var n;e.preventDefault(),console.log(o),j(Object(i.a)(Object(i.a)({},o),{},{loading:!0})),(n=S,fetch("".concat(w,"/user/signup"),{method:"POST",body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))).then((function(e){console.log(e),e.error?j(Object(i.a)(Object(i.a)({},o),{},{loading:!1,error:e.error})):(c.dispatch({type:d,payload:[].concat(Object(m.a)(t),[e])}),j(Object(i.a)(Object(i.a)({},a),{},{success:!0})))})).catch((function(e){return console.log(e)}))};return Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("h3",{className:"mb-5",children:"Sign Up"}),Object(n.jsxs)(n.Fragment,{children:[h?Object(n.jsx)("h2",{className:"lead bg-light p-5",children:"Loading..."}):""," "]}),Object(n.jsxs)(n.Fragment,{children:[" ",O?Object(n.jsx)("div",{className:"alert alert-danger",children:O}):""," "]}),Object(n.jsx)(n.Fragment,{children:x?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"card toSignin",children:[Object(n.jsx)("h5",{className:"card-header",children:"New account"}),Object(n.jsxs)("div",{className:"card-body",children:[Object(n.jsx)("p",{className:"card-text",children:"Sign up success, new account created"}),Object(n.jsx)(f.b,{to:"/signin",className:"btn btn-success btn-raised ",children:"Sign in"})]})]}),Object(n.jsx)("div",{className:"overlay-signup"})]}):""}),Object(n.jsxs)("form",{onSubmit:C,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Avatar"}),Object(n.jsx)("input",{type:"file",name:"photo",onChange:F,className:"form-control-file"})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Name"}),Object(n.jsx)("input",{type:"name",name:"name",className:"form-control",value:p,onChange:F})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Email"}),Object(n.jsx)("input",{type:"email",name:"email",className:"form-control",value:b,onChange:F})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Password"}),Object(n.jsx)("input",{type:"password",name:"password",className:"form-control",value:u,onChange:F})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"About yourself"}),Object(n.jsx)("textarea",{rows:"10",name:"about",className:"form-control",value:g,onChange:F})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-raised btn-primary",children:"Submit"})]})]})})})}))),M=Object(l.b)((function(e){return{jwt:e.jwt,posts:e.posts}}),null)(Object(g.g)((function(e){var t=e.jwt,c=Object(N.a)(e,["jwt"]),a={title:"",body:"",photo:"",error:"",success:!1,formData:"",loading:!1},r=Object(s.useState)(a),l=Object(y.a)(r,2),o=l[0],j=l[1],d=Object(s.useState)(new FormData),b=Object(y.a)(d,2),u=b[0],m=(b[1],o.title),h=o.body,O=o.success,x=o.error,p=o.loading;Object(s.useEffect)((function(){window.scrollTo(0,0);var e=c.posts.find((function(e){return e._id===c.match.params.postId}));for(var t in j(Object(i.a)(Object(i.a)({},o),e)),e)u.set(t,e[t])}),[t,c.posts]);var g=function(e){var t=e.target.name,c="photo"===t?e.target.files[0]:e.target.value;u.set(t,c),j(Object(i.a)(Object(i.a)({},o),{},Object(D.a)({},t,c)))},v=function(e){e.preventDefault(),u.set("postedBy",t.user._id),j(Object(i.a)(Object(i.a)({},o),{},{loading:!0})),function(e,t,c){return fetch("".concat(w,"/post/update/").concat(t),{method:"PUT",headers:{Authorization:"Bearer ".concat(c)},body:e}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(u,c.match.params.postId,t.token).then((function(e){return console.log(e),e.error?j(Object(i.a)(Object(i.a)({},o),{},{loading:!1,error:e.error})):j(Object(i.a)(Object(i.a)({},a),{},{success:!0}))})).catch((function(e){return console.log(e)}))};return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("h2",{className:"mb-5",children:"Update Post"})}),Object(n.jsxs)("div",{className:"col-12",children:[function(){if(x)return"jwt expired"===x?Object(n.jsxs)(n.Fragment,{children:[x&&Object(n.jsxs)("div",{className:"alert alert-danger",children:[x,", try ",Object(n.jsx)(f.b,{to:"/signin",children:"signin"})," again"]})," "]}):Object(n.jsxs)(n.Fragment,{children:[x&&Object(n.jsx)("div",{className:"alert alert-danger",children:x})," "]})}(),Object(n.jsxs)(n.Fragment,{children:[O&&Object(n.jsx)("div",{className:"alert alert-success",children:"Post updated"})," "]}),Object(n.jsxs)(n.Fragment,{children:[p?Object(n.jsx)("h2",{className:"lead bg-light p-5",children:"Loading..."}):""," "]}),Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("form",{onSubmit:v,children:[Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Photo"}),Object(n.jsx)("input",{type:"file",name:"photo",className:"form-control-file",onChange:g})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Title"}),Object(n.jsx)("input",{type:"text",name:"title",className:"form-control",onChange:g,value:m})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"",className:"text-muted",children:"Body"}),Object(n.jsx)("textarea",{style:{whiteSpace:"pre-line"},name:"body",className:"form-control",onChange:g,value:h})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-raised btn-primary",children:"Submit"})]})})]})]})})})));var G=function(){return Object(n.jsx)(f.a,{children:Object(n.jsxs)("div",{children:[Object(n.jsx)(I,{}),Object(n.jsxs)(g.d,{children:[Object(n.jsx)(g.b,{path:"/",exact:!0,component:C}),Object(n.jsx)(g.b,{path:"/profile/:userId",component:J}),Object(n.jsx)(g.b,{path:"/signup",component:z}),Object(n.jsx)(g.b,{path:"/signin",component:U}),Object(n.jsx)(g.b,{path:"/users",component:B}),Object(n.jsx)(v,{path:"/edit/:userId",children:Object(n.jsx)(L,{})}),Object(n.jsx)(v,{path:"/post/create",children:Object(n.jsx)(A,{})}),Object(n.jsx)(v,{path:"/post/update/:postId",children:Object(n.jsx)(M,{})}),Object(n.jsx)(g.b,{path:"/post/:postId",component:P})]})]})})};r.a.render(Object(n.jsx)(l.a,{store:p,children:Object(n.jsx)(G,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.e6f6f306.chunk.js.map